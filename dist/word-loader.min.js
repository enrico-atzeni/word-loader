!function(){var WordLoader=function(element,args){args=args||{};var _this=this,avoidCount=0;maxAvoidPerIteration=10,avoidAreaCache=null;const defaults={timeout:300,fadingDuration:200,overlayFadingDuration:200,forceStopTimeout:2e4,maxWords:50,wordClasses:"word-word",rangeAvailableFromCenter:50,rangeDistanceFalseRandom:10,words:!1,minimumTime:0,debug:!1,hideOn:"load",avoid:{center:{x:"50%",y:"50%"},width:"15%",height:"6%"},centerLoader:!0};var options={};for(var k in defaults)options[k]=k in args?args[k]:defaults[k];if(options.rangeDistanceFalseRandom&&options.rangeAvailableFromCenter/2<=1.2*options.rangeDistanceFalseRandom&&(options.rangeDistanceFalseRandom=0,console.error("Cannot enable rangeDistanceFalseRandom because too close to rangeAvailableFromCenter")),"object"==typeof element&&!1 in element)return console.error(element,"must be an ID or a valid DOM element"),!1;if("string"==typeof element&&(element=document.getElementById(element)),element){if(!options.words){if(words_json=element.getAttribute("words"))try{options.words=JSON.parse(words_json)}catch(e){console.error(e)}options.words||("object"==typeof wl_words&&wl_words.length?options.words=wl_words:options.words=["You","need","to","insert","some","words"])}options.words.length>options.maxWords&&options.words.splice(options.maxWords);for(var alreadyShowedWords=[],domWords=[],previousPos=!1,currentShowedWord=!1,i=0;i<options.words.length;i++){var w=options.words[i];domWords[w]=createWordElement(w),element.appendChild(domWords[w])}options.centerLoader&&element.insertAdjacentHTML("afterbegin",'<div class="wl-load"><div></div><div></div><div></div><div></div></div>');var timing_ms=options.fadingDuration/1e3,css=document.createElement("style");css.type="text/css",css.innerHTML="\n        #word-loader ."+options.wordClasses.replace(/ /g,".")+" {\n            transition: opacity "+timing_ms+"s ease, transform "+timing_ms+"s ease;\n            -moz - transition: opacity "+timing_ms+"s ease, transform "+timing_ms+"s ease;\n            -webkit - transition: opacity "+timing_ms+"s ease, transform "+timing_ms+"s ease;\n        }\n        #word-loader {\n            transition: "+timing_ms+"s ease opacity;\n            -moz - transition: "+timing_ms+"s ease opacity;\n            -webkit - transition: "+timing_ms+"s ease opacity;\n        }\n        #word-loader.hidden {\n            opacity: 0;\n        }",document.head.appendChild(css),showWord();var forceStopTimeout=setTimeout(this.stopLoop,options.forceStopTimeout),doStop=!1;if("load"==options.hideOn?window.addEventListener(options.hideOn,stopOnEvent):document.addEventListener(options.hideOn,stopOnEvent),options.minimumTime)try{options.minimumTime=parseInt(options.minimumTime),this.startedAt=(new Date).getTime()}catch(e){console.error(e),options.minimumTime=0}if(options.avoid)try{calculateAvoidArea()}catch(e){console.error("WordLoader: Wrong avoid option configuration",e)}this.stopLoop=function(){doStop=!0,element.classList.add("hidden"),clearInterval(forceStopTimeout),setTimeout((function(){options.debug?(element.style.zIndex=-1,console.debug("WordLoader: stopped and in debug mode",this)):element.parentElement.removeChild(element)}),options.overlayFadingDuration)},options.debug&&(this.options=options,this.element=element,this.show=function(){doStop=!1,element.removeAttribute("style"),element.classList.remove("hidden"),showWord()},showAvoidArea(),window.wloaders?window.wloaders.push(this):window.wloaders=[this],console.debug("WordLoader: istance available in window.wloaders with index",window.wloaders.length-1),console.log('WordLoader: to see debug info activate the "Verbose" filter in the console'))}else console.error(element,"invalid or not found in DOM");function stopOnEvent(){if(options.minimumTime>0){let endedAt,timeElapsed=(new Date).getTime()-_this.startedAt;if(timeElapsed<options.minimumTime)return setTimeout(_this.stopLoop,options.minimumTime-timeElapsed),void(options.debug&&console.debug("WordLoader: waiting other",options.minimumTime-timeElapsed,"before closing becase of the minimumTime option"))}_this.stopLoop()}function createWordElement(word){var b=document.createElement("span");return b.innerText=word,b.className=options.wordClasses,b}function hideCurrentWord(){currentShowedWord&&domWords[currentShowedWord].classList.remove("shown")}function showWord(){doStop||(hideCurrentWord(),setTimeout((function(){if(!doStop){currentShowedWord=fetchWordToShow(),avoidCount=0;var pos=getRandomPos();domWords[currentShowedWord].style.top=pos.y,domWords[currentShowedWord].style.left=pos.x,domWords[currentShowedWord].classList.add("shown"),setTimeout((function(){doStop||setTimeout(showWord,options.timeout)}),options.fadingDuration)}}),options.fadingDuration))}function pxToPercentual(px){var pxVal;return parseInt(px)/(window.innerWidth/100)}function calculateAvoidArea(){var centerX=options.avoid.center.x.indexOf("%")?parseInt(options.avoid.center.x):pxToPercentual(options.avoid.center.x),centerY=options.avoid.center.y.indexOf("%")?parseInt(options.avoid.center.y):pxToPercentual(options.avoid.center.y),halfW=(options.avoid.width.indexOf("%")?parseInt(options.avoid.width):pxToPercentual(options.avoid.width))/2,halfH=(options.avoid.height.indexOf("%")?parseInt(options.avoid.height):pxToPercentual(options.avoid.height))/2;avoidAreaCache={minX:centerX-halfW,maxX:centerX+halfW,minY:centerY-halfH,maxY:centerY+halfH},(options.rangeAvailableFromCenter/2<=50-avoidAreaCache.minX+5||options.rangeAvailableFromCenter/2<=50-avoidAreaCache.minY+5)&&(console.error("WordLoader: avoid area is too big respect of the allowed area. Avoid option will be disabled, increase rangeAvailableFromCenter or decrease the avoid area"),options.avoid=!1)}function showAvoidArea(){if(options.avoid){var avoidAreaElement=document.createElement("div");avoidAreaElement.style.position="absolute",avoidAreaElement.style.top=avoidAreaCache.minY+"%",avoidAreaElement.style.left=avoidAreaCache.minX+"%",avoidAreaElement.style.width=avoidAreaCache.maxX-avoidAreaCache.minX+"%",avoidAreaElement.style.height=avoidAreaCache.maxY-avoidAreaCache.minY+"%",avoidAreaElement.style.zIndex=999999,avoidAreaElement.style.background="rgba(255,0,0,.5)",avoidAreaElement.style.padding=".5em",avoidAreaElement.style.fontSize=".8em",avoidAreaElement.style.boxSizing="border-box",avoidAreaElement.innerText="This is the Avoid Area",element.appendChild(avoidAreaElement)}else console.debug("WordLoader: no avoid setting defined")}function isBetween(x,bound0,bound1){return x>=bound0&&x<=bound1}function isInAvoidArea(x,y,word){if(!options.avoid||avoidCount>=maxAvoidPerIteration)return!1;if(avoidCount++,isBetween(x,avoidAreaCache.minX,avoidAreaCache.maxX)&&isBetween(y,avoidAreaCache.minY,avoidAreaCache.maxY))return!0;var wordEl=document.createElement("div");wordEl.innerText=word,wordEl.className=options.wordClasses.replace(/ /g,"."),wordEl.style.zIndex=-9,wordEl.style.top="-99vw",wordEl.style.left="-99vh",element.appendChild(wordEl);var wordSize_width=pxToPercentual(1.5*wordEl.offsetWidth),wordSize_height=pxToPercentual(1.5*wordEl.offsetHeight);return element.removeChild(wordEl),x<avoidAreaCache.maxX&&x+wordSize_width>avoidAreaCache.minX&&y<avoidAreaCache.maxY&&y+wordSize_height>avoidAreaCache.minY}function getRandomPos(){var r=options.rangeAvailableFromCenter/2,x=randBetween(50-r,50+r),y=randBetween(50-r,50+r);if(options.rangeDistanceFalseRandom){if(previousPos)for(;Math.abs(x-previousPos.x)<=options.rangeDistanceFalseRandom&&Math.abs(y-previousPos.y)<=options.rangeDistanceFalseRandom;)x=randBetween(50-r,50+r),y=randBetween(50-r,50+r);previousPos={x:x,y:y}}return isInAvoidArea(x,y,currentShowedWord)?getRandomPos():{x:x+"%",y:y+"%"}}function randBetween(min,max){return Math.floor(Math.random()*(max-min))+min}function fetchWordToShow(){alreadyShowedWords.length>=options.words.length&&(alreadyShowedWords=[]);let difference=options.words.filter(x=>!alreadyShowedWords.includes(x)),word=difference[randBetween(0,difference.length)];return alreadyShowedWords.push(word),word}};window.WordLoader=WordLoader}();